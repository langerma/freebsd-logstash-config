output {
	if [fields][middleware] == "squid.json" {
		elasticsearch {
		    index => "squidjson-%{+YYYY.MM.dd}"
			hosts => [ "127.0.0.1:9200" ]
		}
	} else if [type] == "freenas" {
	    elasticsearch {
			index => "freenas-%{+YYYY.MM.dd}"
			hosts => [ "127.0.0.1:9200" ]
		}
	} else if [type] == "pfsense" {
        elasticsearch {
            index => "pfsense-%{+YYYY.MM.dd}"
            hosts => [ "127.0.0.1:9200" ]
        }
    } else if [type] == "cisco" {
        elasticsearch {
        	index => "cisco-%{+YYYY.MM.dd}"
        	hosts => [ "127.0.0.1:9200" ]
        }
    } else if [source] == "/var/log/httpd-access.log" {
        elasticsearch {
            index => "apache-%{+YYYY.MM.dd}"
            hosts => [ "127.0.0.1:9200" ]
        }
    } else if [type] == "haproxy" {
        elasticsearch {
            index => "haproxy-%{+YYYY.MM.dd}"
            hosts => [ "127.0.0.1:9200" ]
        }
    } else if [type] == "ipfix" {
        elasticsearch {
            hosts => [ "${ELASTIFLOW_ES_HOST:127.0.0.1:9200}" ]
            #user => "${ELASTIFLOW_ES_USER:elastic}"
            #password => "${ELASTIFLOW_ES_PASSWD:changeme}"
            index => "elastiflow-3.0.1-%{+YYYY.MM.dd}"
            template => "${ELASTIFLOW_TEMPLATE_PATH:/usr/local/etc/logstash/templates}/elastiflow.template.json"
            template_name => "elastiflow-3.0.1"
            template_overwrite => "true"
        }
    }
    else {
		elasticsearch {
			hosts => [ "127.0.0.1:9200" ]
		}
	}
}
